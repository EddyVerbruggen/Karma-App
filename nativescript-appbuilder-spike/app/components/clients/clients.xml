<Page xmlns="http://www.nativescript.org/tns.xsd" 
      xmlns:lv="nativescript-telerik-ui-pro/listview"
      xmlns:widgets="utils/widgets"
      loaded="onLoaded">
    <Page.actionBar>
    	<widgets:action-bar />
	</Page.actionBar>
    <!-- Gridlayout with no rows and columns means it will stack on top of each other; this is where dialogs go -->
    <GridLayout>
        <GridLayout rows="auto, *, 60" columns="*">
            <ActivityIndicator busy="{{ isLoading }}" class="{{ isLoading ? '' : 'hidden' }}" row="0" col="0" />
            <lv:RadListView items="{{clientsList}}" row="1" col="0" visibility="{{ isLoading ? 'collapse' : 'visible' }}">
                <lv:RadListView.listViewLayout>
                    <lv:ListViewLinearLayout scrollDirection="Vertical" />
                </lv:RadListView.listViewLayout>
                <lv:RadListView.itemTemplate>
                    <StackLayout orientation="horizontal" class="client-row">           
                        <StackLayout width="20%" verticalAlignment="center">
                            <Label style="background-image: url('~/images/placeholder/temp-client-thumb.jpg');" class="client-row-thumbnail" />
                        </StackLayout>
                        <StackLayout width="55%" orientation="vertical" verticalAlignment="center">
                            <Label text="{{client_name}}" class="client-row-name" />
                            <Label text="{{bookings + ' Appointment Pending'}}" class="client-row-appointment" visibility="{{bookings ? 'visible' : 'collapse'}}" />
                        </StackLayout>
                        <StackLayout width="25%" verticalAlignment="center">
                            <Label text="{{status_text}}" class="{{'client-row-status-' + status}}" textWrap="true" />
                        </StackLayout>
                    </StackLayout>
                </lv:RadListView.itemTemplate>
            </lv:RadListView>

            <StackLayout orientation="horizontal" row="2" col="0">
                <StackLayout width="33%" tap="onTapStatus" orientation="horizontal" horizontalAlignment="center">
                    <Label text="{{selectedStatus}}" fontSize="18" fontFamily="MyriadPro-SemiCn" />
                    <Label class="ionicons-icon" text=" &#xf35f;" fontSize="18" />
                </StackLayout>
                <StackLayout width="33%" tap="onTapTags" orientation="horizontal" horizontalAlignment="center">
                    <Label text="{{selectedTag}}" fontSize="18" fontFamily="MyriadPro-SemiCn" />
                    <Label class="ionicons-icon" text=" &#xf35f;" fontSize="18" />
                </StackLayout>
                <StackLayout width="33%" tap="onTapSortby" orientation="horizontal" horizontalAlignment="center">
                    <Label text="{{selectedSortby}}" fontSize="18" fontFamily="MyriadPro-SemiCn" />
                    <Label class="ionicons-icon" text=" &#xf35f;" fontSize="18" />
                </StackLayout>
            </StackLayout>
        </GridLayout>
        

        <StackLayout width="100%" height="100%" backgroundColor="#CCCCCC" opacity="0" id="statusList" verticalAlignment="center" visibility="{{statusVisible ? 'visible' : 'collapse'}}" tap="onTapOverlay">
            <StackLayout width="50%" height="auto" horizontalAlignment="center" verticalAlignment="center" backgroundColor="white" opacity="1">
                <ListView items="{{statusList}}" itemTap="onSelectStatus">
                    <ListView.itemTemplate>
                        <Label text="{{status}}" fontSize="24" color="black" padding="10" margin="10" />
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </StackLayout>
        
        <StackLayout width="100%" height="100%" backgroundColor="#CCCCCC" opacity="0" id="tagsList" verticalAlignment="center" visibility="{{tagsVisible ? 'visible' : 'collapse'}}" tap="onTapOverlay">
            <StackLayout width="50%" height="auto" horizontalAlignment="center" verticalAlignment="center" backgroundColor="white" opacity="1">
                <ListView items="{{tagsList}}" itemTap="onSelectTag">
                    <ListView.itemTemplate>
                        <Label text="{{tag}}" fontSize="24" color="black" padding="10" margin="10" />
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </StackLayout>
        
        <StackLayout width="100%" height="100%" backgroundColor="#CCCCCC" opacity="0" id="sortbyList" verticalAlignment="center" visibility="{{sortbyVisible ? 'visible' : 'collapse'}}" tap="onTapOverlay">
            <StackLayout width="50%" height="auto" horizontalAlignment="center" verticalAlignment="center" backgroundColor="white" opacity="1">
                <ListView items="{{sortbyList}}" itemTap="onSelectSortby">
                    <ListView.itemTemplate>
                        <Label text="{{field}}" fontSize="24" color="black" padding="10" margin="10" />
                    </ListView.itemTemplate>
                </ListView>
            </StackLayout>
        </StackLayout>
        
    </GridLayout>
</Page>