<Page xmlns="http://www.nativescript.org/tns.xsd" 
      xmlns:drawer="nativescript-telerik-ui-pro/sidedrawer"
      xmlns:lv="nativescript-telerik-ui-pro/listview"
      xmlns:widgets="utils/widgets"
      loaded="onLoaded">
    <Page.actionBar>
    	<widgets:action-bar />
	</Page.actionBar>
    <drawer:RadSideDrawer id="sideDrawer">
        <drawer:RadSideDrawer.drawerContent>
            <widgets:side-drawer />
		</drawer:RadSideDrawer.drawerContent>
        <drawer:RadSideDrawer.mainContent>
            <GridLayout>
                <GridLayout rows="auto, *" columns="*">
                    <ActivityIndicator busy="{{ isLoading }}" class="{{ isLoading ? '' : 'hidden' }}" row="0" col="0" style="margin-top:35%;" />
                    <lv:RadListView items="{{messageList}}" row="1" col="0" visibility="{{ isLoading ? 'collapse' : 'visible' }}">
                        <lv:RadListView.listViewLayout>
                            <lv:ListViewLinearLayout scrollDirection="Vertical" />
                        </lv:RadListView.listViewLayout>
                        <lv:RadListView.itemTemplate>
                            <StackLayout class="message-wrapper">
                                <StackLayout orientation="horizontal" class="message-row message-read" tap="onSelectMessage" screeningId="{{screening_id}}">
                                    <StackLayout width="70">
                                        <Label style="background-image: url('~/images/placeholder/temp-client-thumb.jpg');" class="message-row-thumbnail" />
                                    </StackLayout>
                                    <StackLayout>
                                        <WrapLayout>
                                            <Label text="{{client_name}}" class="message-row-name" />
                                            <Label text="New" class="new-message" />
                                        </WrapLayout>                                  
     	                               <Label text="{{ last_message }}" class="message-row-message" textWrap="true" width="100%" />
                                        <Label text="{{ message_time }}" class="message-row-message-time" />                                    
                                    </StackLayout>
                                </StackLayout>
                            </StackLayout>
                        </lv:RadListView.itemTemplate>
                    </lv:RadListView>            
                </GridLayout>        
            </GridLayout>
        </drawer:RadSideDrawer.mainContent>
	</drawer:RadSideDrawer>
</Page>